<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Index</title>

    <link rel="stylesheet" href="css/index.css">
    <script src="jsStore/jsstore.min.js"></script>
    <script src="jsStore/jsstore.worker.min.js"></script>
    <script src="BD.js"></script>

    <script>

        // funcion para leer una imagen base 64 que pasemos a traves de un input
        function leerImagen() {
            var fichero = this.files[0];
            fImagen = this.files[0];

            console.log(fImagen);

            var reader = new FileReader();
            reader.onload = function () {
                console.log("contenido", reader.result);
                document.querySelector("#imagen").src = reader.result;
            }

            reader.readAsDataURL(fichero);
        }

        function createDatabase() {
            var dataBase = new BD();
        }

        function mostrarFormulario() {
            document.querySelector("#formPersonas").style.visibility = "visible";
        }

        function cancelarForm() {
            document.querySelector("#formPersonas").style.visibility = "hidden";
        }

        function anadeForm() {

        }

        window.onload = function () {
            createDatabase();
            document.querySelector("#btNuevaPersona").addEventListener("click", mostrarFormulario);
            document.querySelector("#btAnade").addEventListener('click', anadeForm);
            document.querySelector("#btCancelar").addEventListener('click', cancelarForm);
            document.querySelector("#imagenPersona").addEventListener('change', leerImagen);
        }
    </script>
</head>

<body>
    <h3>Registro de Usuarios</h3>

    <div id="formPersonas" class="formPersonas">
        <fieldset>
            <legend>Alta en el servicio</legend>
            <div>
                <label for="dni">DNI</label>
                <input type="text" id="dni" size="10" maxlength="9" value="27473339T" />
            </div>
            <div>
                <label for="nombre">Nombre</label>
                <input type="text" id="nombre" value="Marco Elio" />
            </div>
            <div>
                <label for="apellidos">Apellidos</label>
                <input type="text" id="apellidos" size="40" value="García Gomariz" />
            </div>
            <div>
                <label for="fecha">Fecha</label>
                <input type="date" id="fecha" size="40" />
            </div>
            <div>
                <label for="estatura">Estatura</label>
                <input type="text" id="estatura" size="40" value="1.80" />
            </div>
            <div>
                <label for="imagenPersona">Imagen</label>
                <!-- Para obtener el contenido de un input "file" usamos .src en vez de .value -->
                <input type="file" id="imagenPersona" size="40" />
                <div id="divImagen">
                    <img src="" id="imagen">
                </div>
            </div>
            <div class="btn">
                <button id="btAnade">Añadir </button>
                <button id="btCancelar">Cancelar </button>
            </div>
        </fieldset>
    </div>



    <br />
    <button class="btn" id="btNuevaPersona">Nueva persona</button>
    <br><br>
    <table id="tabla_personas" border="1">
        <tr>
            <th>ID</th>
            <th>DNI</th>
            <th>NOMBRE</th>
            <th>APELLIDOS</th>
            <th>F NACIMIENTO</th>
            <th>ESTATURA</th>
            <th>IMAGEN BLOB</th>
            <th>IMAGEN 64</th>
            <th>BORRAR</th>
            <th>MODIFICAR</th>
        </tr>

        <tbody id="filas_tabla">

        </tbody>
    </table>

    <br><br>

</body>

</html>